<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/cropped-favicon-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/cropped-favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/cropped-favicon-16x16.png">
  <link rel="mask-icon" href="/images/cropped-favicon.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="{ Hello Magento 2 }">
<meta property="og:url" content="http://example.com/page/16/index.html">
<meta property="og:site_name" content="{ Hello Magento 2 }">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="ThankIT">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/16/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>{ Hello Magento 2 }</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">{ Hello Magento 2 }</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">解决 Magento 2 应用问题，更注重深度挖掘。(ง •̀_•́)ง</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/magento-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9B%BE%E8%A7%A3%E4%B8%8B%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/magento-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9B%BE%E8%A7%A3%E4%B8%8B%E8%BD%BD/" class="post-title-link" itemprop="url">Magento 数据库图解下载</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-18 15:38:42" itemprop="dateCreated datePublished" datetime="2017-05-18T15:38:42+08:00">2017-05-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">其他</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下是关于 Magento 的数据库图解，有三个版本的可以下载。资料来源于网络，侵删。 <a href="/wp-content/uploads/2017/05/ce1922">Magento 1.9.2.2 Database</a> <a href="/wp-content/uploads/2017/05/MAGENTO_v1.3.2.4-Database_Diagram.pdf">MAGENTO_v1.3.2.4-Database_Diagram</a> <a href="/wp-content/uploads/2017/05/magento_v116-database_diagram.pdf">magento_v116-database_diagram</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/magento-%E4%B8%AD%E6%96%87%E8%B5%84%E6%96%99%E4%B8%8B%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/magento-%E4%B8%AD%E6%96%87%E8%B5%84%E6%96%99%E4%B8%8B%E8%BD%BD/" class="post-title-link" itemprop="url">Magento 中文资料下载</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-18 13:11:14" itemprop="dateCreated datePublished" datetime="2017-05-18T13:11:14+08:00">2017-05-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">其他</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>今天整理文件，发现了以前收集的一些关于 Magento 的中文资料（不是关于 2 的）。忘记资料是怎么收集来的了。如有侵权，请告知，我会删掉。 以下是下载地址： <a href="/wp-content/uploads/2017/05/Magento-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C.pdf">Magento 使用手册.pdf</a> <a href="/wp-content/uploads/2017/05/Magento.doc">Magento中文用户手册.doc</a> 上面两个类似 Magento 的中文版 User Guide <a href="/wp-content/uploads/2017/05/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Magento.pdf">深入理解Magento.pdf</a> 上面这个关于开发</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/requirejs-modularity-async/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/requirejs-modularity-async/" class="post-title-link" itemprop="url">关于 RequireJS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-17 12:13:40" itemprop="dateCreated datePublished" datetime="2017-05-17T12:13:40+08:00">2017-05-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uncategorized/" itemprop="url" rel="index"><span itemprop="name">uncategorized</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>文章没有什么特别之处，算是对 <a href="/alan-magento-2-and-requirejs/#requirejs-and-jquery-plugins">Magento 2 and RequireJS (翻译)</a>一点补充，主要是为了记录备查。 RequireJS 主要做的就是模块化异步加载 JS Js 模块化为了便于维护和团队协作。 参考： <a target="_blank" rel="noopener" href="http://foio.github.io/requireJS/">RequireJS结构分析，实现自己的模块加载系统</a> 这篇文章提到 RequireJS 通过 script dom element 方法来异步加载 js 模块。RequireJS 在代码层面控制模块的加载顺序（依赖） js 异步加载，是为了解决 js 加载时阻塞网页上其他资源的下载的问题，为了让页面内容更早展现在用户面前。 参考: <a target="_blank" rel="noopener" href="http://supersamchow.github.io/2016/05/16/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BA%BF%E7%A8%8B%E9%98%BB%E5%A1%9E%E5%92%8C%E6%97%A0%E9%98%BB%E5%A1%9E%E5%8A%A0%E8%BD%BD%E8%84%9A%E6%9C%AC%E7%9A%84%E7%90%86%E8%A7%A3/">浏览器线程阻塞和无阻塞加载脚本的理解</a> <a target="_blank" rel="noopener" href="http://www.cnblogs.com/giggle/p/5513769.html">JavaScript阻塞剖析与改善</a> <a target="_blank" rel="noopener" href="http://foio.github.io/javascript-async/">在网页中异步加载javascript</a> 例子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- File: require-example.html --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;My Sample Project&lt;/title&gt;</span><br><span class="line">        &lt;!-- data-main attribute tells require.js to load</span><br><span class="line">             scripts/main.js after require.js loads. --&gt;</span><br><span class="line">        &lt;script data-main=&quot;scripts/main&quot; src=&quot;scripts/require.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;My Sample Project&lt;/h1&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>那么 require.js 会首先加载 <code>scripts/main.js</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- File: scripts/main.js --&gt;</span><br><span class="line">console.log(&#x27;load main&#x27;);</span><br><span class="line">require.config(&#123;</span><br><span class="line">    paths: &#123;</span><br><span class="line">        &quot;hello&quot;: &quot;helper/world&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">requirejs([&#x27;hello&#x27;], function(helper_world) &#123;</span><br><span class="line">    var message = helper_world.getMessage();</span><br><span class="line">    console.log(&quot;I am second&quot;);</span><br><span class="line">    alert(message);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//File: scripts/helper/world.js</span><br><span class="line">define([], function()&#123;</span><br><span class="line">    var o = &#123;&#125;;</span><br><span class="line">    o.getMessage = function()</span><br><span class="line">    &#123;</span><br><span class="line">        return &#x27;Hello Module World&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&quot;I am first load&quot;);</span><br><span class="line">    return o;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>那么在控制台我们应该看到的是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">main.js:5  load main</span><br><span class="line">world.js:8 I am first load</span><br><span class="line">main.js:13 I am second</span><br></pre></td></tr></table></figure>

<p><img src="/wp-content/uploads/2017/05/requirejs-dom.png"> 验证通过 script dom element 异步加载。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/sublime-text-phpfmt/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/sublime-text-phpfmt/" class="post-title-link" itemprop="url">Sublime Text phpfmt</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-22 10:42:18" itemprop="dateCreated datePublished" datetime="2017-04-22T10:42:18+08:00">2017-04-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PHP/" itemprop="url" rel="index"><span itemprop="name">PHP</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>phpfmt 格式化支持 psr-1, psr-2 推荐标准。（<a href="/about-psr/">关于 psr</a>） phpfmt 支持 sublime-text, vim, phpstorm 三款编辑器,本文只讲 sublime-text 下的安装配置。 首先必须安装有 php 7.0 及以上版本 然后在 Sublime Text 按 <code>ctrl+shift+P</code> 选择 <code>Package Control: Install Package</code> 输入 <code>phpfmt</code> 安装完成后(windows 系统，其他请参看参考网址)，进入菜单 Preferences -&gt; Package Settings -&gt; phpfmt -&gt; Settings-Default 设置内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;version&quot;: 4,</span><br><span class="line">    &quot;php_bin&quot;:&quot;C:\\wamp64\\bin\\php\\php7.0.4\\php.exe&quot;, //php 版本必需为7以上</span><br><span class="line">    &quot;enable_auto_align&quot;:false, //自动调整对齐</span><br><span class="line">    &quot;indent_with_space&quot;: true, //缩进改为空格</span><br><span class="line">    &quot;psr1&quot;: true, //开启psr1格式化</span><br><span class="line">    &quot;psr1_naming&quot;: true, //自动将下滑线命名改为驼峰 aa_bb (aaBb)</span><br><span class="line">    &quot;psr2&quot;: true, //开启psr2格式化</span><br><span class="line">    &quot;format_on_save&quot;:true, //保存的时候自动格式化</span><br><span class="line">    &quot;option&quot;: &quot;value&quot;</span><br><span class="line">&#125;</span><br><span class="line">//注意如果 psr1, psr2,等不生效，请重启sublime,</span><br><span class="line">//如果重启后还是不生效，则 ctrl+shift+p 输入phpfmt 调整toggle选项</span><br></pre></td></tr></table></figure>

<p>然后，比如下面这样的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">for($i = 0; $i &lt; 10; $i++)</span><br><span class="line">&#123;</span><br><span class="line">if($i%2==0)</span><br><span class="line">echo &quot;Flipflop&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>保存后应该变成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">for ($i = 0; $i &lt; 10; $i++) &#123;</span><br><span class="line">  if ($i%2 == 0) &#123;</span><br><span class="line">    echo &quot;Flipflop&quot;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址"></a><a href="#%E5%8F%82%E8%80%83%E7%BD%91%E5%9D%80"></a>参考网址</h2><p><a target="_blank" rel="noopener" href="https://packagecontrol.io/packages/phpfmt">https://packagecontrol.io/packages/phpfmt</a> <a target="_blank" rel="noopener" href="http://blog.itweshare.com/blog/sublime-text-php-format">http://blog.itweshare.com/blog/sublime-text-php-format</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/product-image-upload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/product-image-upload/" class="post-title-link" itemprop="url">上传产品图片（Uploading Product Images）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-15 01:07:29" itemprop="dateCreated datePublished" datetime="2017-04-15T01:07:29+08:00">2017-04-15</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Magento-2-%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" itemprop="url" rel="index"><span itemprop="name">Magento 2 用户使用手册</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em><a target="_blank" rel="noopener" href="http://docs.magento.com/m2/ce/user_guide/catalog/product-image-upload.html">原文网址</a></em> 对于每个产品, 您可以上传多张图片, 重新排列它们的顺序, 控制每张图片的使用方式。如果要管理的图片数量很多, 您可能更愿意批处理导入, 而不是逐个上载。了解更多，请参考 <a target="_blank" rel="noopener" href="http://docs.magento.com/m2/ce/user_guide/system/data-import-product-images.html">Importing Product Images</a> 要管理图片：</p>
<ol>
<li>进入产品编辑页，找到 <strong>Images and Videos</strong> 部分，然后做一下事情：<ul>
<li>上传图片<ul>
<li>从桌面上或者文件夹中拖动一张图片到 相机 <img src="/wp-content/uploads/2017/04/btn-camera_22x18.png"> images box 中，就像下图所示的。</li>
<li>在 images box 中，点击相机 <img src="/wp-content/uploads/2017/04/btn-camera_22x18.png"> 图标，然后从弹出的文件夹中找到你要上传的图片，选中后，点击 open <img src="/wp-content/uploads/2017/04/product-images-and-video-jewel-tee.png"></li>
</ul>
</li>
<li>调整图片顺序 要调整顺序，点击 <img src="/wp-content/uploads/2017/04/btn-sort2_19x18.png"> 图标，然后拖动图片到新的位置。 <img src="/wp-content/uploads/2017/04/product-images-and-videos-drag.png" alt="change order"></li>
<li>删除图片 点击 删除图标 <img src="/wp-content/uploads/2017/04/btn-delete_22x18.png"> 即可删除。</li>
</ul>
</li>
<li>点击图片，会进入图片详情视图，然后可以做如下事情： <img src="/wp-content/uploads/2017/04/product-image-detail-jewel-tee.png"><ul>
<li>输入 Alt text Alt text 指的是网页上的图片因为某种原因不能被显示时应该出现的替代文字。有些阅读器会用到它。搜索引擎也会用到它。有些浏览器会在鼠标移到图片上时显示 Alt Text。Alt text 可以是一些精心挑选的关键词。 在 Alt Text 中输入图片的简短描述。</li>
<li>分配角色 默认情况下，上传的第一张图片会被分配到所有角色。如果要分配角色给其他图片，可以如下操作：<ol>
<li>点击图片，打开图片详情视图</li>
<li>在 Role (角色) box 中，选择要分配给该图片的角色 当你返回到图片和视频部分的时候，当前的角色分配情况就会显示在图片的下方 <img src="/wp-content/uploads/2017/04%5Cproduct-images-video-swatch.png" alt="asigned roles"></li>
</ol>
</li>
<li>隐藏图片 排除图片，可以勾选 Hidden 复选框 <img src="/wp-content/uploads/2017/04%5Cproduct-images-and-videos-hidden.png" alt="Hidden Images"></li>
</ul>
</li>
<li>要关闭图片的详情视图，可以点击右上角的 × 来关闭。</li>
<li>完成后，点击 Save</li>
</ol>
<p>图片角色 Image Role</p>
<p>Role</p>
<p>Descriptions</p>
<p>Thumbnail 缩略图</p>
<p>缩略图用在购物车 shopping cart 中，还有一些内容块，比如相关产品中。示例大小：50 x 50 pixels</p>
<p>Small Image</p>
<p>小图片用在分类列表中和搜索结果页面，以及 Up-sells, Cross-sells, and the New Products List 示例大小：470 x 470 pixels</p>
<p>Base Image</p>
<p>base 图片是产品详情页的主要图片，如果上传的图片尺寸大于其容器的尺寸，那么图像放大镜的效果会被激活 示例大小：470 x 470 pixels(无缩放) 1100 x 1100 pixels (有缩放)</p>
<p>Swatch</p>
<p>Swatch 就是样品的意思，用来示例颜色、图案或者纹理。示例大小：50 x 50 pixels</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/settings-basic-image-management/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/settings-basic-image-management/" class="post-title-link" itemprop="url">图像和视频（Images and Video）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-14 23:12:29" itemprop="dateCreated datePublished" datetime="2017-04-14T23:12:29+08:00">2017-04-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Magento-2-%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" itemprop="url" rel="index"><span itemprop="name">Magento 2 用户使用手册</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em><a target="_blank" rel="noopener" href="http://docs.magento.com/m2/ce/user_guide/catalog/settings-basic-image-management.html">原文网址</a></em> 使用一致比例的高质量图片会使您的产品目录看起来很有吸引力，更专业。如果您的产品目录很多，每个产品有数张图片，那么您很容易就有数以百计，或者上千的产品图片要管理。在开始前，为您的图片文件规定好命名规则，并组织好他们，以便在需要的时候，可以找到原图。 <img src="/wp-content/uploads/2017/04/product-images-videos-swatch.png" alt="product images"> 每个产品图片在目录（catalog）中会以不同的尺寸被加载。图片 container 的尺寸在样式表中定义，但是图片如何使用则是由分配给该图片的角色决定的。产品的主要图片，或者称为“base image”必须足够大，这样才能实现放大镜的效果。此外，更小的图片会用在产品列表中，或者是用在购物车中的缩略图上。您可以最大尺寸的图片，让 Magento 去决定每种用途所需要的尺寸。同一张图片可以用于各种角色，也可以不同的角色用不同的图片。默认情况下，上传的第一张图篇将分配到三种角色。（这三种角色 role 是 Base, Small, Thumbnail）</p>
<h3 id="相关阅读"><a href="#相关阅读" class="headerlink" title="相关阅读"></a><a href="#%E7%9B%B8%E5%85%B3%E9%98%85%E8%AF%BB"></a>相关阅读</h3><p>如果要更改图片尺寸，请参考<a href="/about-view-xml/">关于 view.xml</a> 为什么要有图片角色(<a href="/pictures-in-magento-2/">Magento 2中的图片</a>)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/settings-basic-product-details/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/settings-basic-product-details/" class="post-title-link" itemprop="url">商品详情（Product Details）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-14 22:06:44" itemprop="dateCreated datePublished" datetime="2017-04-14T22:06:44+08:00">2017-04-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Magento-2-%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" itemprop="url" rel="index"><span itemprop="name">Magento 2 用户使用手册</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em><a target="_blank" rel="noopener" href="http://docs.magento.com/m2/ce/user_guide/catalog/settings-basic-product-details.html">原文网址</a></em> “产品详细信息” 部分提供有关产品的基本信息, 并使您能够在定义产品时添加产品的属性和类别。要了解更多信息, 请参阅每个产品类型的说明。 <img src="/wp-content/uploads/2017/04/product-basic-settings-product-details.png" alt="product details"></p>
<h3 id="字段说明-默认模板"><a href="#字段说明-默认模板" class="headerlink" title="字段说明 (默认模板)"></a><a href="#%E5%AD%97%E6%AE%B5%E8%AF%B4%E6%98%8E-(%E9%BB%98%E8%AE%A4%E6%A8%A1%E6%9D%BF)"></a>字段说明 (默认模板)</h3><p>字段</p>
<p>范围</p>
<p>描述</p>
<p>Name 名称</p>
<p>Store View</p>
<p>（必填）产品的名称，您希望他在目录中显示的名称</p>
<p>SKU</p>
<p>Global</p>
<p>每件产品或服务的唯一标识，用来管理库存的，英文全称为 Stock Keeping Unit，默认会根据产品的名称自动生成一个 SKU</p>
<p>Price</p>
<p>Website</p>
<p>产品零售价格</p>
<p>Tax Class</p>
<p>Website</p>
<p>与产品相关的税类</p>
<p>Images and Videos</p>
<p>Store View</p>
<p>显示当前可用于产品的图像和视频。</p>
<p>Quantity</p>
<p>Global</p>
<p>当前库存中的产品数量</p>
<p>Weight</p>
<p>Global</p>
<p>决定产品的重量，计算运费时会基于该值。在美国, 重量是以磅和盎司来衡量的, 而公制系统的国家则使用克和公斤。在配置中为您的区域设置计重单位。</p>
<p>Categories 类别</p>
<p>Global</p>
<p>指示分配给产品的类别。</p>
<p>Description 描述</p>
<p>Store View</p>
<p>产品页面上显示的主要产品说明。产品描述最初以纯文本形式输入。如果 “说明” 属性允许, 可使用所见即所得的编辑器设置 html 标记的文本格式。不要直接从文本编辑器粘贴文本, 因为它可能包含无法正确联机呈现的打印控制代码。如果使用文本编辑器, 首先将文本保存为. txt 文件, 这样可以去打印控制代码，然后再粘贴到产品说明字段中。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/alan-magento-2-introducing-ui-components/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/alan-magento-2-introducing-ui-components/" class="post-title-link" itemprop="url">Magento 2 的 UI Components 介绍（翻译）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-05 11:01:02" itemprop="dateCreated datePublished" datetime="2017-04-05T11:01:02+08:00">2017-04-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/alan-storm/" itemprop="url" rel="index"><span itemprop="name">alan storm</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em><a target="_blank" rel="noopener" href="http://alanstorm.com/magento_2_introducing_ui_components/">原文地址</a></em> 原作发布于 2016年7月10日 UI 组件是 Magento 2 中构建用户界面元素的新方法，管理后台很多地方都是基于它的。 今天我们的教程将带领大家，站在比较高的角度理解 UI 组件的目标是什么，并在尽可能高的层面介绍他的实现细节。最后我们创建一个 网格&#x2F;列表 UI 组件做总结。</p>
<h2 id="The-Positive-Spin-（积极的一面）"><a href="#The-Positive-Spin-（积极的一面）" class="headerlink" title="The Positive Spin （积极的一面）"></a><a href="#the-positive-spin-%EF%BC%88%E7%A7%AF%E6%9E%81%E7%9A%84%E4%B8%80%E9%9D%A2%EF%BC%89"></a>The Positive Spin （积极的一面）</h2><p>要了解 UI 组件的目标，最简单的方法的是从 Magento 1 的生成后台用户界面的代码说起。下面是 Magento 1 layout update XML 一部分代码，我们以他为例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- #File: app/design/adminhtml/default/default/layout/catalog.xml --&gt;</span><br><span class="line">&lt;adminhtml_catalog_product_new&gt;</span><br><span class="line">&lt;update handle=&quot;editor&quot;/&gt;</span><br><span class="line">&lt;reference name=&quot;content&quot;&gt;</span><br><span class="line">&lt;block type=&quot;adminhtml/catalog_product_edit&quot; name=&quot;product_edit&quot;&gt;&lt;/block&gt;</span><br><span class="line">&lt;/reference&gt;</span><br><span class="line">&lt;reference name=&quot;left&quot;&gt;</span><br><span class="line">&lt;block type=&quot;adminhtml/catalog_product_edit_tabs&quot; name=&quot;product_tabs&quot;&gt;&lt;/block&gt;</span><br><span class="line">&lt;/reference&gt;</span><br><span class="line">&lt;reference name=&quot;js&quot;&gt;</span><br><span class="line">&lt;block type=&quot;adminhtml/catalog_product_edit_js&quot; template=&quot;catalog/product/js.phtml&quot; name=&quot;catalog_product_js&quot;&gt;&lt;/block&gt;</span><br><span class="line">&lt;block type=&quot;core/template&quot; template=&quot;catalog/wysiwyg/js.phtml&quot;/&gt;</span><br><span class="line">&lt;/reference&gt;</span><br><span class="line">&lt;/adminhtml_catalog_product_new&gt;</span><br></pre></td></tr></table></figure>

<p>这四个 layout 添加了一个产品编辑表， 考虑到 <code>&lt;update handle=&quot;editor&quot;/&gt;</code> 部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- #File: app/design/adminhtml/default/default/layout/main.xml --&gt;</span><br><span class="line">&lt;editor&gt;</span><br><span class="line">&lt;reference name=&quot;head&quot;&gt;</span><br><span class="line">&lt;action method=&quot;setCanLoadExtJs&quot;&gt;&lt;flag&gt;1&lt;/flag&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;mage/adminhtml/variables.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;mage/adminhtml/wysiwyg/widget.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;lib/flex.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;lib/FABridge.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;mage/adminhtml/flexuploader.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;mage/adminhtml/browser.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addJs&quot;&gt;&lt;script&gt;prototype/window.js&lt;/script&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addItem&quot;&gt;&lt;type&gt;js_css&lt;/type&gt;&lt;name&gt;prototype/windows/themes/default.css&lt;/name&gt;&lt;/action&gt;</span><br><span class="line">&lt;action method=&quot;addCss&quot;&gt;&lt;name&gt;lib/prototype/windows/themes/magento.css&lt;/name&gt;&lt;/action&gt;</span><br><span class="line">&lt;/reference&gt;</span><br><span class="line">&lt;/editor&gt;</span><br></pre></td></tr></table></figure>

<p>你会发现给页面添加一个编辑表单是很复杂的事情。 UI 组件的意图是隐藏这种复杂性。Magento 在 layout handle xml 文件中引入了新的<code>&lt;uiComponent/&gt;</code>标签。(Magento 2 handle XML files 类似 Magento 1 的 layout update XML files)在 Magento 2 中，你可以通过下面的代码给页面添加一个产品编辑表单。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uiComponent name=&quot;product_form&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>通过引入<code>&lt;uiComponent/&gt;</code>，Magento 2 让开发者更容易在不同位置重用不同的组件。While It was possible to drop different Magento 1 UI forms and grids in different areas, you needed to know which blocks and javascript files made up a particular component. Magento 1’s approach made it easy to accidentally setup a grid listing or a form so the component almost worked. Magento 2 的 UI 组件正是用来解决这一问题的，它也极大地简化了每个人的 layout handle xml 文件。</p>
<h2 id="The-Actual-Spin-（实际情况）"><a href="#The-Actual-Spin-（实际情况）" class="headerlink" title="The Actual Spin （实际情况）"></a><a href="#the-actual-spin-%EF%BC%88%E5%AE%9E%E9%99%85%E6%83%85%E5%86%B5%EF%BC%89"></a>The Actual Spin （实际情况）</h2><p>我们刚刚所说的的确是真的，不过 UI 组件系统比美丽的构想更模糊。这是因为 UI 组件还有很多其他目标，这些目标带来了相当的复杂性。 就我所知，UI 组件系统：</p>
<ul>
<li>简化了 Layout Handle XML 文件</li>
<li>使得后台用户界面元素的构建从 HTML+Javascript 变成了纯 js 的自定义小部件系统。</li>
<li>可以由较小的组件构造出更复杂的 UI 组件。</li>
<li>Pre-renders data for UI components as JSON, binding closely to Magento backend data objects</li>
<li>使用 ajax 来更新组件的数据</li>
<li>Introduce a new DSL for creating all of the above</li>
</ul>
<p>UI 组件系统是雄心勃勃的一个系统，和 Magento 2中的许多东西一样，它还没有完全出炉（没有稳定）。一方面你可能想要远离还不太完美的系统，另一方面大多数的网格和表单使用 UI 组件系统来构建界面，还有一些使用传统的 block 渲染加 js 文件。如果你想构建一个全功能的模块，你需要使用 UI 组件系统。 下文代表着我（Alan）对当前的（Magento 2.1）UI组件的理解.其中的细节将来很可能会有变化，但是希望核心的概念保持不变。 没有为想要开发后台 UI 界面的开发人员准备的标准实践课程——像往常一样，最好的做法是看看核心团队对他们自己的组件做了什么，模仿他们，并且在 Magento 版本更新的时候，密切注意自己的模块&#x2F;扩展代码。 如果你对复杂的实现细节没有兴趣，你可以跳到文章末尾，使用 Pestle 创建 UI 组件部分。</p>
<h2 id="Pure-Javascript-（纯-JS）"><a href="#Pure-Javascript-（纯-JS）" class="headerlink" title="Pure Javascript （纯 JS）"></a><a href="#pure-javascript-%EF%BC%88%E7%BA%AF-js%EF%BC%89js"></a>Pure Javascript （纯 JS）</h2><p>如果你后台进入 <strong>Content -&gt; Block</strong>，你会看到你 Magento 系统中的所有 CMS Blocks 列在一张表格中。如果你对 Blocks 不是很了解，他们是创建可重用的 HTML 代码块的一种方式。Block information is stored in Magento’s backend using <a target="_blank" rel="noopener" href="http://alanstorm.com/magento_2_crud_models_for_database_access/">CRUD Models</a>。 你看到的列表就是一个 UI 组件，是通过以下 layout handle xml 配置的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- File: vendor/magento/module-cms/view/adminhtml/layout/cms_block_index.xml --&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;referenceContainer name=&quot;content&quot;&gt;</span><br><span class="line">&lt;uiComponent name=&quot;cms_block_listing&quot;/&gt;</span><br><span class="line">&lt;/referenceContainer&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br></pre></td></tr></table></figure>

<p>如果你对 layout xml 完全陌生，上面的代码解释一下就是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">获得名为 content 的 container 的引用，把 cms_block_listing UI 组件加进去。</span><br></pre></td></tr></table></figure>

<p>如果你查看 HTML 源代码，你会发现<code>&lt;uiComponent/&gt;</code>标签渲染出了如下 HTML 代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;admin__data-grid-outer-wrap&quot; data-bind=&quot;scope: &#x27;cms_block_listing.cms_block_listing&#x27;&quot;&gt;</span><br><span class="line">&lt;div data-role=&quot;spinner&quot; data-component=&quot;cms_block_listing.cms_block_listing.cms_block_columns&quot; class=&quot;admin__data-grid-loading-mask&quot;&gt;</span><br><span class="line">&lt;div class=&quot;spinner&quot;&gt;</span><br><span class="line">&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- ko template: getTemplate() --&gt;&lt;!-- /ko --&gt;</span><br><span class="line">&lt;script type=&quot;text/x-magento-init&quot;&gt;</span><br><span class="line">&#123;&quot;*&quot;: &#123;&quot;Magento_Ui/js/core/app&quot;: &#123;...very large js object...&amp;#125;&amp;#125;&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>如果你阅读过 Magento 2 高级 js 系列的文章，尤其是<a href="/alan-magento-2-javascript-init-scripts/">Magento 2 Javascript Init Scripts</a>，你就知道 <code>x-magento-init</code> 标签将会调用 <code>Magento_Ui/js/core/app</code> RequireJS 模块，并将<code>large js object</code>作为参数传递给他。 不涉及更深入的实现细节（实现细节 some of which you can read about in <a target="_blank" rel="noopener" href="http://magento.stackexchange.com/questions/120447/how-does-magento-2-apply-knockoutjs-bindings/120730#120730">these</a> Stack Exchange <a target="_blank" rel="noopener" href="http://magento.stackexchange.com/questions/120221/magento-2-how-where-is-the-gettemplate-knockout-function-bound/120508#120508">answers</a>），this javascript code ends up creating a series of javascript constructor objects that Magento will use as KnockoutJS view models（创建了一个用于 view model 的对象） 浏览器中界面元素的实际呈现由 KnockoutJS 处理。外面的 div 框架使用了<a target="_blank" rel="noopener" href="http://magento.stackexchange.com/questions/120447/how-does-magento-2-apply-knockoutjs-bindings/120730">Magento’s custom KnockoutJS scope binding</a>，绑定由<code>text/x-magento-init</code>创建的view model。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ... data-bind=&quot;scope: &#x27;cms_block_listing.cms_block_listing&#x27;&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>然后渲染 UI 组件通过 KnockoutJS 的 “tag-less” template binding 完成。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ko template: getTemplate() --&gt;&lt;!-- /ko --&gt;</span><br></pre></td></tr></table></figure>

<p>对<code>getTemplate</code>的调用实际上启动了一系列嵌套的模板渲染——从一个名为<code>collection.html</code>的文件开始。你可以通过浏览器的 XHR 调试窗口查找所有<code>.html</code>的模板文件。如果你这里有较多疑惑，你可以参阅<a href="/alan_magento_2_knockoutjs_integration/">Magento 2 KnockoutJS 集成</a>。另外，记住Magento 的核心团队<a target="_blank" rel="noopener" href="http://magento-quickies.alanstorm.com/post/147052601955/magentos-knockoutjs-templates-arent-knockoutjs">使用了一些自定义的标签和属性来增强KnockoutJS的模板</a>，这可能会带给你一些迷惑。 总的来说，Magento 1 用 HTML 来渲染，用 js 增强用户界面的功能。Magento 2 依然会使用一些 HTML 搭建结构，但是用户界面元素的大部分渲染工作转由 RequireJS 模块和 KnockoutJS 模板来做。</p>
<h2 id="Sub-Components-（子组件）"><a href="#Sub-Components-（子组件）" class="headerlink" title="Sub Components （子组件）"></a><a href="#sub-components-%EF%BC%88%E5%AD%90%E7%BB%84%E4%BB%B6%EF%BC%89"></a>Sub Components （子组件）</h2><p>如果仔细审视一下<code>x-magento-init</code>的 JSON 对象，你会发现他有很多嵌套的子对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;*&quot;: &#123;</span><br><span class="line">&quot;Magento_Ui/js/core/app&quot;: &#123;</span><br><span class="line">&quot;types&quot;: /*...*/</span><br><span class="line">&quot;components&quot;: &#123;</span><br><span class="line">&quot;cms_block_listing&quot;: &#123;</span><br><span class="line">&quot;children&quot;: &#123;</span><br><span class="line">&quot;cms_block_listing&quot;: &#123;</span><br><span class="line">/*...*/</span><br><span class="line">&quot;children&quot;: &#123;</span><br><span class="line">&quot;listing_top&quot;: &#123;</span><br><span class="line">&quot;type&quot;: &quot;container&quot;,</span><br><span class="line">&quot;name&quot;: &quot;listing_top&quot;,</span><br><span class="line">&quot;children&quot;: &#123;</span><br><span class="line">&quot;bookmarks&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;columns_controls&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;fulltext&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;listing_filters&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;listing_massaction&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;listing_paging&quot;: &#123;/*...*/&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>Older developers will be bemused to note the return of nodes named <code>children</code> — a practice we thought was left behind in Magento 1. These child element are each, themselves, fully featured UI Components. <code>cms_block_listing</code> 是由 <code>listing_top</code>, <code>bookmarks</code>, 等组件构成的。 前文我们提到，<code>getTemplate</code>的调用以渲染许多子组件告终。<code>collection.html</code>作为第一个 KnockoutJS 模板，他的命名也体现了这是由许多 UI 组件构成的<code>collection</code>。很遗憾，今天的教程没有时间完整梳理这个渲染流程。 今天我们要讲的是 PHP 开发者如何控制渲染的 js tree。我们回到<code>&lt;uiComponent/&gt;</code>标签。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- #File: vendor/magento/module-cms/view/adminhtml/layout/cms_block_index.xml --&gt;</span><br><span class="line">&lt;uiComponent name=&quot;cms_block_listing&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>Magento 使用<code>uiComponent</code>的<code>name</code>查找名为<code>cms_block_listing.xml</code>的 XML 文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento//module-cms/view/adminhtml/ui_component/cms_block_listing.xml</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">/**</span><br><span class="line">* Copyright © 2016 Magento. All rights reserved.</span><br><span class="line">* See COPYING.txt for license details.</span><br><span class="line">*/</span><br><span class="line">--&gt;</span><br><span class="line">&lt;listing xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:module:Magento_Ui:etc/ui_configuration.xsd&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;js_config&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;provider&quot; xsi:type=&quot;string&quot;&gt;cms_block_listing.cms_block_listing_data_source&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;deps&quot; xsi:type=&quot;string&quot;&gt;cms_block_listing.cms_block_listing_data_source&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;spinner&quot; xsi:type=&quot;string&quot;&gt;cms_block_columns&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;buttons&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;add&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;name&quot; xsi:type=&quot;string&quot;&gt;add&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;label&quot; xsi:type=&quot;string&quot; translate=&quot;true&quot;&gt;Add New Block&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;class&quot; xsi:type=&quot;string&quot;&gt;primary&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;url&quot; xsi:type=&quot;string&quot;&gt;*/*/new&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;!-- ... we&#x27;ll get to this in a second ... --&gt;</span><br><span class="line">&lt;/listing&gt;</span><br></pre></td></tr></table></figure>

<p>These UI Component XML files are a new <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Domain-specific_language">domain specific language (DSL)</a>。上面的指令告诉 Magento</p>
<ol>
<li>Look up a PHP class name and default arguments for the root level <code>listing</code> node</li>
<li>Instantiate that class, using the <code>argument</code> node as constructor arguments.</li>
</ol>
<p>Magento 将会从下面的文件中查找 PHP 类名和默认的参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento/module-ui/view/base/ui_component/etc/definition.xml</span><br><span class="line">&lt;components xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:module:Magento_Ui:etc/ui_definition.xsd&quot;&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;listing sorting=&quot;true&quot; class=&quot;Magento\Ui\Component\Listing&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;template&quot; xsi:type=&quot;string&quot;&gt;templates/listing/default&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;save_parameters_in_session&quot; xsi:type=&quot;string&quot;&gt;1&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;client_root&quot; xsi:type=&quot;string&quot;&gt;mui/index/render&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;config&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;component&quot; xsi:type=&quot;string&quot;&gt;uiComponent&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;/listing&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;/components&gt;</span><br></pre></td></tr></table></figure>

<p>所以，当 Magento 渲染 时，他就像下面这样开始运行（简化后的样子），</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$uiComponent = new Magento\Ui\Component\Listing(</span><br><span class="line">$context, $components, [</span><br><span class="line">&#x27;template&#x27;=&gt;&#x27;templates/listing/default&#x27;,</span><br><span class="line">&#x27;save_parameters_in_session&#x27;=&gt;&#x27;1&#x27;,</span><br><span class="line">&#x27;client_root&#x27;=&gt;&#x27;mui/index/render&#x27;,</span><br><span class="line">&#x27;config&#x27;=&gt;[</span><br><span class="line">&#x27;component&#x27;=&gt;&#x27;uiComponent&#x27;</span><br><span class="line">],</span><br><span class="line">&#x27;js_config&#x27;=&gt;[</span><br><span class="line">&#x27;provider&#x27;=&gt;&#x27;&#x27;,</span><br><span class="line">&#x27;deps&#x27;=&gt;&#x27;&#x27;</span><br><span class="line">],</span><br><span class="line">&#x27;spinner&#x27;=&gt;&#x27;cms_block_columns&#x27;,</span><br><span class="line">&#x27;buttons&#x27;=&gt;[</span><br><span class="line">&#x27;add&#x27;=&gt;[</span><br><span class="line">&#x27;name&#x27;=&gt;&#x27;add&#x27;,</span><br><span class="line">&#x27;label&#x27;=&gt;&#x27;Add New Block&#x27;,</span><br><span class="line">&#x27;class&#x27;=&gt;&#x27;primary&#x27;,</span><br><span class="line">&#x27;url&#x27;=&gt;&#x27;*/*/new&#x27;</span><br><span class="line">]</span><br><span class="line">],</span><br><span class="line">]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>参数的数据来自于<code>&lt;argument/&gt;</code>节点的合并。每个参数都有不同的作用——不过我们感兴趣的是<code>templates/listing/default</code>参数。他指定了该组件渲染的 <strong>XHTML template</strong>。<code>templates/listing/default</code>字符串对应下面的模板。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento//module-ui/view/base/ui_component/templates/listing/default.xhtml</span><br><span class="line">&lt;div</span><br><span class="line">class=&quot;admin__data-grid-outer-wrap&quot;</span><br><span class="line">data-bind=&quot;scope: &#x27;&amp;#123;&amp;#123;getName()&amp;#125;&amp;#125;.&amp;#123;&amp;#123;getName()&amp;#125;&amp;#125;&#x27;&quot;</span><br><span class="line">xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">xsi:noNamespaceSchemaLocation=&quot;../../../../../../Ui/etc/ui_template.xsd&quot;&gt;</span><br><span class="line">&lt;div data-role=&quot;spinner&quot; data-component=&quot;&amp;#123;&amp;#123;getName()&amp;#125;&amp;#125;.&amp;#123;&amp;#123;getName()&amp;#125;&amp;#125;.&amp;#123;&amp;#123;spinner&amp;#125;&amp;#125;&quot; class=&quot;admin__data-grid-loading-mask&quot;&gt;</span><br><span class="line">&lt;div class=&quot;spinner&quot;&gt;</span><br><span class="line">&lt;span/&gt;&lt;span/&gt;&lt;span/&gt;&lt;span/&gt;&lt;span/&gt;&lt;span/&gt;&lt;span/&gt;&lt;span/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;!-- ko template: getTemplate() --&gt;&lt;!-- /ko --&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>这个 XHTML 模版是由完全不同于 Magento 中标准的 phtml 模版渲染引擎所渲染。 Magento 通过调用 UI 组件对象中方法（<code>getName()</code>）替换<code>&amp;#123;&amp;#123;...&amp;#125;&amp;#125;</code>文本，或者 directly accessing a data property of the same object (<code>&amp;#123;&amp;#123;spinner&amp;#125;&amp;#125;</code>). 可能有人已经注意到模板中没有<code>x-magento-init</code>。加入<code>x-magento-init</code>部分也是由 XHTML rendering engine 完成的——更确切的说，在<code>appendLayoutConfiguration</code>方法中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento/module-ui/TemplateEngine/Xhtml/Result.php</span><br><span class="line">public function __toString()</span><br><span class="line">&#123;</span><br><span class="line">try &#123;</span><br><span class="line">//...</span><br><span class="line">$this-&gt;appendLayoutConfiguration();</span><br><span class="line">$result = $this-&gt;compiler-&gt;postprocessing($this-&gt;template-&gt;__toString());</span><br><span class="line">&#125; catch (\Exception $e) &#123;</span><br><span class="line">$this-&gt;logger-&gt;critical($e-&gt;getMessage());</span><br><span class="line">$result = $e-&gt;getMessage();</span><br><span class="line">&#125;</span><br><span class="line">return $result;</span><br><span class="line">&#125;</span><br><span class="line">//...</span><br><span class="line">public function appendLayoutConfiguration()</span><br><span class="line">&#123;</span><br><span class="line">$layoutConfiguration = $this-&gt;wrapContent(</span><br><span class="line">json_encode(</span><br><span class="line">$this-&gt;structure-&gt;generate($this-&gt;component)</span><br><span class="line">)</span><br><span class="line">);</span><br><span class="line">$this-&gt;template-&gt;append($layoutConfiguration);</span><br><span class="line">&#125;</span><br><span class="line">//...</span><br><span class="line">protected function wrapContent($content)</span><br><span class="line">&#123;</span><br><span class="line">return &#x27;&lt;script type=&quot;text/x-magento-init&quot;&gt;&lt;![CDATA[&#x27;</span><br><span class="line">. &#x27;&#123;&quot;*&quot;: &#123;&quot;Magento_Ui/js/core/app&quot;: &#x27; . str_replace([&#x27;&lt;![CDATA[&#x27;, &#x27;]]&gt;&#x27;], &#x27;&#x27;, $content) . &#x27;&amp;#125;&amp;#125;&#x27;</span><br><span class="line">. &#x27;]]&gt;&lt;/script&gt;&#x27;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Magento 将会以 JSON 字符串的方式渲染 UI 组件对象的结构，然后将字符串添加到模版中。 你问 UI 组件的结构是什么？ Remember the we’ll get to the rest in a second hand waving we did here?</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento//module-cms/view/adminhtml/ui_component/cms_block_listing.xml</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">/**</span><br><span class="line">* Copyright © 2016 Magento. All rights reserved.</span><br><span class="line">* See COPYING.txt for license details.</span><br><span class="line">*/</span><br><span class="line">--&gt;</span><br><span class="line">&lt;listing xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:module:Magento_Ui:etc/ui_configuration.xsd&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;js_config&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;provider&quot; xsi:type=&quot;string&quot;&gt;cms_block_listing.cms_block_listing_data_source&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;deps&quot; xsi:type=&quot;string&quot;&gt;cms_block_listing.cms_block_listing_data_source&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;spinner&quot; xsi:type=&quot;string&quot;&gt;cms_block_columns&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;buttons&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;add&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;name&quot; xsi:type=&quot;string&quot;&gt;add&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;label&quot; xsi:type=&quot;string&quot; translate=&quot;true&quot;&gt;Add New Block&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;class&quot; xsi:type=&quot;string&quot;&gt;primary&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;url&quot; xsi:type=&quot;string&quot;&gt;*/*/new&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;!-- ... we&#x27;ll get to this in a second ... --&gt;</span><br><span class="line">&lt;/listing&gt;</span><br></pre></td></tr></table></figure>

<p>如果我们看一看上面的节点内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento//module-cms/view/adminhtml/ui_component/cms_block_listing.xml</span><br><span class="line"></span><br><span class="line">&lt;listingToolbar name=&quot;listing_top&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;/listingToolbar&gt;</span><br><span class="line">&lt;columns name=&quot;cms_block_columns&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;/columns&gt;</span><br></pre></td></tr></table></figure>

<p>我们会发现更多配置的 UI 组件。所有名称不是 <code>argument</code> 的 UI 组件的子节点，都是父对象的子节点。Magneto 渲染 <code>listing</code> 对象的时候，它还会在 <code>definitions.xml</code> 中查找 <code>listingToolbar</code>, <code>columns</code> 等组件的类和参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento/module-ui/view/base/ui_component/etc/definition.xml</span><br><span class="line">&lt;components xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:module:Magento_Ui:etc/ui_definition.xsd&quot;&gt;</span><br><span class="line">&lt;listingToolbar class=&quot;Magento\Ui\Component\Container&quot;&gt;&lt;!--...--&gt;&lt;/listingToolbar&gt;</span><br><span class="line">&lt;columns class=&quot;Magento\Ui\Component\Listing\Columns&quot;&gt;&lt;!--...--&gt;&lt;/columns&gt;</span><br><span class="line">&lt;/components&gt;</span><br></pre></td></tr></table></figure>

<p>之前我们用的伪代码实际上更像下面这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$uiComponent = new Magento\Ui\Component\Listing(...);</span><br><span class="line"></span><br><span class="line">$listingToolbar = new Magento\Ui\Component\Container(...);</span><br><span class="line">$columns = new Magento\Ui\Component\Listing\Columns(...);</span><br><span class="line"></span><br><span class="line">$uiComponent-&gt;addComponent($listingToolbar);</span><br><span class="line">$uiComponent-&gt;addComponent($columns);</span><br></pre></td></tr></table></figure>

<p>注意，这些子组件是通过 RequireJS 模块名称来进行配置的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento/module-ui/view/base/ui_component/etc/definition.xml</span><br><span class="line">&lt;columns class=&quot;Magento\Ui\Component\Listing\Columns&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;config&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;component&quot; xsi:type=&quot;string&quot;&gt;Magento_Ui/js/grid/listing&lt;/item&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;/columns&gt;</span><br></pre></td></tr></table></figure>

<p>这些就是 Magento 转化为 KnockoutJS view model 的 RequireJS 模块。如果你查看 KnockoutJS view models 的代码，你将发现通常 view model constructor 中配置了其 template 模版。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento//module-ui/view/base/web/js/grid/listing.js</span><br><span class="line">define([</span><br><span class="line">&#x27;ko&#x27;,</span><br><span class="line">&#x27;underscore&#x27;,</span><br><span class="line">&#x27;Magento_Ui/js/lib/spinner&#x27;,</span><br><span class="line">&#x27;uiLayout&#x27;,</span><br><span class="line">&#x27;uiCollection&#x27;</span><br><span class="line">], function (ko, _, loader, layout, Collection) &#123;</span><br><span class="line">&#x27;use strict&#x27;;</span><br><span class="line"></span><br><span class="line">return Collection.extend(&#123;</span><br><span class="line">defaults: &#123;</span><br><span class="line">template: &#x27;ui/grid/listing&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">//...</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Data-Source-Nodes-（数据源节点）"><a href="#Data-Source-Nodes-（数据源节点）" class="headerlink" title="Data Source Nodes （数据源节点）"></a><a href="#data-source-nodes-%EF%BC%88%E6%95%B0%E6%8D%AE%E6%BA%90%E8%8A%82%E7%82%B9%EF%BC%89"></a>Data Source Nodes （数据源节点）</h2><p>最后，有一个特别的 UI 组件子节点，就是<code>&lt;dataSource/&gt;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#File: vendor/magento//module-cms/view/adminhtml/ui_component/cms_block_listing.xml</span><br><span class="line">&lt;listing xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;urn:magento:module:Magento_Ui:etc/ui_configuration.xsd&quot;&gt;</span><br><span class="line">&lt;argument name=&quot;data&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;js_config&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;provider&quot; xsi:type=&quot;string&quot;&gt;cms_block_listing.cms_block_listing_data_source&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;deps&quot; xsi:type=&quot;string&quot;&gt;cms_block_listing.cms_block_listing_data_source&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;spinner&quot; xsi:type=&quot;string&quot;&gt;cms_block_columns&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;buttons&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;add&quot; xsi:type=&quot;array&quot;&gt;</span><br><span class="line">&lt;item name=&quot;name&quot; xsi:type=&quot;string&quot;&gt;add&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;label&quot; xsi:type=&quot;string&quot; translate=&quot;true&quot;&gt;Add New Block&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;class&quot; xsi:type=&quot;string&quot;&gt;primary&lt;/item&gt;</span><br><span class="line">&lt;item name=&quot;url&quot; xsi:type=&quot;string&quot;&gt;*/*/new&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/item&gt;</span><br><span class="line">&lt;/argument&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;dataSource name=&quot;cms_block_listing_data_source&quot;&gt;</span><br><span class="line">&lt;!-- ... --&gt;</span><br><span class="line">&lt;/dataSource&gt;</span><br><span class="line">&lt;/listing&gt;</span><br></pre></td></tr></table></figure>

<p>名为 <code>dataSource</code> 的节点仍然是 UI 组件，不过他们有“特殊待遇”。当 Magento 从 UI 组件中渲染 JSON 的时候，dataSource 节点被从 <code>children</code> 结构中拉出来，Magento 在主要的顶层组件之后就渲染他们（在组件名后加 <code>_data_source</code> 作为对象的键值） （译者注，还记得上面的子组件 <code>listing_top</code> 吧，他的层级和 <code>dataSource</code> 节点是一样的，按照道理他应该在 <code>children</code> 下和 <code>listing_top</code> 并列在一个层级，但是现在上升了一个层级，和 <code>cms_block_listing</code> 并列了。）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;*&quot;: &#123;</span><br><span class="line">&quot;Magento_Ui/js/core/app&quot;: &#123;</span><br><span class="line">&quot;types&quot;: /*...*/</span><br><span class="line">&quot;components&quot;: &#123;</span><br><span class="line">&quot;cms_block_listing&quot;: &#123;</span><br><span class="line">&quot;children&quot;: &#123;</span><br><span class="line">&quot;cms_block_listing&quot;: &#123;</span><br><span class="line">/*...*/</span><br><span class="line">&quot;children&quot;: &#123;</span><br><span class="line">&quot;listing_top&quot;: &#123;</span><br><span class="line">&quot;type&quot;: &quot;container&quot;,</span><br><span class="line">&quot;name&quot;: &quot;listing_top&quot;,</span><br><span class="line">&quot;children&quot;: &#123;</span><br><span class="line">&quot;bookmarks&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;columns_controls&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;fulltext&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;listing_filters&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;listing_massaction&quot;: &#123;/*...*/&#125;,</span><br><span class="line">&quot;listing_paging&quot;: &#123;/*...*/&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><code>dataSource</code> 组件就是 Magento 寻找 UI 组件真实数据的地方。UI 组件中的数据由 <code>dataSource</code> 组件提供。</p>
<h2 id="Summary-of-the-UI-Component-Rendering-DSL-（总结）"><a href="#Summary-of-the-UI-Component-Rendering-DSL-（总结）" class="headerlink" title="Summary of the UI Component Rendering DSL （总结）"></a><a href="#summary-of-the-ui-component-rendering-dsl-%EF%BC%88%E6%80%BB%E7%BB%93%EF%BC%89"></a>Summary of the UI Component Rendering DSL （总结）</h2><p>OK — that was a bananas-pants amount of information. I just finished writing it and I’m not sure even I followed all of it, so don’t worry if your head is spinning. 下面是比较高层面的总结。</p>
<ol>
<li>UI 组件通过 <code>x-magento-init</code> 脚本注入全局注册的 KnockoutJS view models （原文：UI Components render an x-magento-init script that populates a global registry of KnockoutJS view models）</li>
<li>UI 组件也加载 HTML 骨架，然后使用 KnockoutJS 和自定义的 <code>scope</code> 绑定来渲染 DOM 节点租成组件。</li>
<li><code>ui_component</code> XML 文件是一种领域特定语言（domain specific language），用来示例嵌套的层级 UI 组件对象。Magento 会使用它来为 <code>x-magento-init</code> 脚本加载 JSON</li>
<li><code>ui_component</code> XML 节点的名称用来查找 php 类进行实例化</li>
<li>Magento 使用子节点 <code>&lt;argument/&gt;</code> 作为该类的构造参数</li>
<li>Magento 使用 <code>&lt;dataSource /&gt;</code> 中的数据作为 UI 组件的数据源。（例如表格列表中的信息）</li>
<li>子节点将会作为子组件进行渲染——这些子组件遵循和父组件一样的规则</li>
<li>最顶层的 UI 组件配置的 XHTML 模版，Magento 通过 PHP 进行渲染</li>
<li>UI 组件节点配置 RequireJS 模块，而 Magento 使用他们作为 KnockoutJS view model constructors</li>
</ol>
<p>正如你所看到的，一方面 uiComponent 极大地简化了 Magento 2 中 layout handle XML 文件，隐藏了包括前后台在内的更为复杂的 UI 渲染系统，另一方面这对开发者来说，也要求你理解 Magento 对 RequireJS 和 KnockoutJS 做出的自定义。</p>
<h2 id="Creating-a-Grid-Listing-with-Pestle-（创建一个列表）"><a href="#Creating-a-Grid-Listing-with-Pestle-（创建一个列表）" class="headerlink" title="Creating a Grid Listing with Pestle （创建一个列表）"></a><a href="#creating-a-grid-listing-with-pestle-%EF%BC%88%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%88%97%E8%A1%A8%EF%BC%89"></a>Creating a Grid Listing with Pestle （创建一个列表）</h2><p>从上文可以了解到，UI 组件系统，为了降低 Magento 1 的 layout update XML 系统的复杂度，提供更明确的使用指导。换句话说，对 Magento 2 开发者来说，这正是代码生成工具（例如 <a target="_blank" rel="noopener" href="https://github.com/astorm/pestle">pestle</a> ，这是 Alan Storm 的一个项目）的用武之地。</p>
<p><em>译者注：由于这一段操作有较多的前提条件，而且使用代码自动生成工具，对我们理解如何创建一个列表的帮助可能不太大，所以此处不再继续翻译，有兴趣的请阅读原文。而关于如何用 uiComponent 创建列表，下次再补上其他的文章。</em></p>
<p>参考 <a href="/how-to-create-admin-grid-in-magento-2">How to Create Admin Grid in Magento 2</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/ubuntu-polipo-shadowsocks-http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/ubuntu-polipo-shadowsocks-http/" class="post-title-link" itemprop="url">Ubuntu 环境 polipo 把 shadowsocks 转为 http 代理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-03-20 14:47:23" itemprop="dateCreated datePublished" datetime="2017-03-20T14:47:23+08:00">2017-03-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uncategorized/" itemprop="url" rel="index"><span itemprop="name">uncategorized</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python</span><br><span class="line">sudo apt-get install python-pip</span><br><span class="line">sudo pip install shadowsocks</span><br></pre></td></tr></table></figure>

<p>新建一个配置文件，&#x2F;home&#x2F;ThankIT&#x2F;test&#x2F;ss.json ，然后配置相应的参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;server&quot;: &quot;&#123;your-server&#125;&quot;,</span><br><span class="line">  &quot;server_port&quot;: 40002,</span><br><span class="line">  &quot;local_port&quot;: 1080,</span><br><span class="line">  &quot;password&quot;: &quot;&#123;your-password&#125;&quot;,</span><br><span class="line">  &quot;timeout&quot;: 600,</span><br><span class="line">  &quot;method&quot;: &quot;aes-256-cfb&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后启动它</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sslocal -c /home/ThankIT/test/ss.json</span><br></pre></td></tr></table></figure>

<p>不要关闭终端 重开一个终端</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install polipo</span><br><span class="line">vi /etc/polipo/config</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">socksParentProxy = &quot;127.0.0.1:1080&quot;</span><br><span class="line">socksProxyType = socks5</span><br></pre></td></tr></table></figure>

<p>重启 polipo 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service polipo restart</span><br></pre></td></tr></table></figure>

<p>为终端配置 http 代理</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=&quot;http://127.0.0.1:8123/&quot;</span><br></pre></td></tr></table></figure>

<p>测试一下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl www.google.com</span><br></pre></td></tr></table></figure>

<p>如果想撤销当前会话的 http_proxy 代理，使用 unset http_proxy 即可。 查看当前 ip</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl ip.gs</span><br><span class="line">当前 IP：125.39.112.14 来自：中国天津天津 联通</span><br></pre></td></tr></table></figure>

<h2 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址"></a><a href="#%E5%8F%82%E8%80%83%E7%BD%91%E5%9D%80"></a>参考网址</h2><p><a target="_blank" rel="noopener" href="https://jingsam.github.io/2016/05/08/setup-shadowsocks-http-proxy-on-ubuntu-server.html">https://jingsam.github.io/2016/05/08/setup-shadowsocks-http-proxy-on-ubuntu-server.html</a> <a target="_blank" rel="noopener" href="http://droidyue.com/blog/2016/04/04/set-shadowsocks-proxy-for-terminal/index.html">http://droidyue.com/blog/2016/04/04/set-shadowsocks-proxy-for-terminal/index.html</a> <a target="_blank" rel="noopener" href="https://aitanlu.com/ubuntu-shadowsocks-ke-hu-duan-pei-zhi.html">https://aitanlu.com/ubuntu-shadowsocks-ke-hu-duan-pei-zhi.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/android-decompiler/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ThankIT">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="{ Hello Magento 2 }">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/android-decompiler/" class="post-title-link" itemprop="url">安卓反编译工具的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-03-20 14:26:35" itemprop="dateCreated datePublished" datetime="2017-03-20T14:26:35+08:00">2017-03-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/uncategorized/" itemprop="url" rel="index"><span itemprop="name">uncategorized</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>仅供学习，别做坏事，尊重别人的劳动成果！</em> 通过解压缩，apk 文件可以得到 res 下的图片资源，但是 xml 类的资源，打开时乱码，也不能看 java 代码，他被打包到 classes.dex 中了。</p>
<ul>
<li>apktool: 获取资源文件，提取图片文件，布局文件，还有一些 XML 的资源文件</li>
<li>dex2jar：将 apk 反编译成 Java 源码 （将 classes.dex 转化为 jar 文件）</li>
<li>jd-gui: 查看 jar 文件</li>
</ul>
<h2 id="apktool"><a href="#apktool" class="headerlink" title="apktool"></a><a href="#apktool"></a>apktool</h2><p>将 apk 复制到 apktool 同一目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apktool.bat d test.apk</span><br></pre></td></tr></table></figure>

<p>然后可以看到生成的 test 文件夹，就有我们想要的资源。 其中 d 是 decode 的意思，表示我们要对 test.apk 这个文件进行解码。那除了这个基本用法之外，我们还可以再加上一些附加参数来控制decode的更多行为：</p>
<ul>
<li>-f 如果目标文件夹已存在，则强制删除现有文件夹（默认如果目标文件夹已存在，则解码失败）。</li>
<li>-o 指定解码目标文件夹的名称（默认使用APK文件的名字来命名目标文件夹）。</li>
<li>-s 不反编译dex文件，也就是说classes.dex文件会被保留（默认会将dex文件解码成smali文件）。</li>
<li>-r 不反编译资源文件，也就是说resources.arsc文件会被保留（默认会将resources.arsc解码成具体的资源文件）。</li>
</ul>
<h2 id="dex2jar"><a href="#dex2jar" class="headerlink" title="dex2jar"></a><a href="#dex2jar"></a>dex2jar</h2><p>把 apk 解压后的 classes.dex 复制到 dex2jar.bat 所在的目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d2j-dex2jar.bat classes.dex</span><br></pre></td></tr></table></figure>

<p>然后我们就得到了 classes-dex2jar.jar 文件</p>
<h2 id="jd-jui"><a href="#jd-jui" class="headerlink" title="jd-jui"></a><a href="#jd-jui"></a>jd-jui</h2><p>然后用 jd-jui 来打开上面的 classes-dex2jar.jar 就可以看见代码了。</p>
<h2 id="在线工具"><a href="#在线工具" class="headerlink" title="在线工具"></a><a href="#%E5%9C%A8%E7%BA%BF%E5%B7%A5%E5%85%B7"></a>在线工具</h2><p>分享一个在线的，如果你有梯子的话。 <a target="_blank" rel="noopener" href="http://www.javadecompilers.com/apk">http://www.javadecompilers.com/apk</a> 效果和上面的工具是差不多的，但是更方便。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"></a>参考链接</h2><p><a target="_blank" rel="noopener" href="http://www.runoob.com/w3cnote/android-tutorial-decompile-apk-get-code-resources.html">反编译APK获取代码&amp;资源</a> <a target="_blank" rel="noopener" href="http://blog.csdn.net/guolin_blog/article/details/49738023">Android安全攻防战，反编译与混淆技术完全解析（上）</a> <a target="_blank" rel="noopener" href="http://www.mottoin.com/89035.html">脱壳</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/32/">32</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ThankIT</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">313</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">136</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ThankIT</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
